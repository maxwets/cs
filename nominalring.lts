const N     = 3
range Nodes = 0..N-1

NODE(I=0) = if (I==0) then LEADER else IDLE,
LEADER    = (send.token -> IDLE | open -> close -> send.token -> IDLE),
IDLE      = (recv.token -> LEADER).

|| NOMINALRING(N=N) = (node[i:Nodes]:NODE(i)) / {
    node[i:Nodes].send/node[(i+1)%N].recv
}.
